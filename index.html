<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Digital Valentine Experience</title>

<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box;margin:0;padding:0}

body{
  height:100vh;
  background:linear-gradient(135deg,#fbcfe8,#dbeafe);
  display:flex;
  justify-content:center;
  align-items:center;
  font-family:'Press Start 2P',cursive;
  overflow:hidden;
}

/* MAIN WINDOW */
.window{
  width:520px;
  height:640px;
  background:white;
  border:4px solid #1e3a8a;
  box-shadow:8px 8px 0 #1e3a8a;
  position:relative;
  overflow:hidden;
  transition:.5s;
}

.titlebar{
  background:#1e3a8a;
  color:white;
  padding:12px;
  font-size:10px;
  text-align:center;
}

.content{
  padding:20px;
  text-align:center;
  font-size:9px;
  color:#1e3a8a;
  height:calc(100% - 40px);
  position:relative;
}

/* BUTTON */
.btn{
  padding:10px;
  border:3px solid #1e3a8a;
  background:#93c5fd;
  margin:10px;
  cursor:pointer;
  display:inline-block;
  transition:.2s;
}
.btn:hover{
  background:#60a5fa;
  transform:scale(1.05);
}

.hidden{display:none}

/* GAME */
.gameArea{
  width:100%;
  height:400px;
  border:3px solid #1e3a8a;
  margin-top:15px;
  position:relative;
  overflow:hidden;
}

.heart{
  position:absolute;
  font-size:28px;
  cursor:pointer;
  animation:float 3s linear infinite;
}
@keyframes float{
  from{transform:translateY(0)}
  to{transform:translateY(-25px)}
}

/* OVERLAY FINALE */
.overlay{
  position:absolute;
  top:0;
  left:0;
  width:100%;
  height:100%;
  background:linear-gradient(180deg,#1e3a8a,#9333ea);
  color:white;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  text-align:center;
  padding:30px;
  opacity:0;
  pointer-events:none;
  transition:1s;
}

.overlay.show{
  opacity:1;
  pointer-events:auto;
}

.overlay h1{
  font-size:16px;
  margin-bottom:20px;
  animation:scaleIn 1s ease forwards;
}

@keyframes scaleIn{
  from{transform:scale(.5);opacity:0}
  to{transform:scale(1);opacity:1}
}

.typewriter{
  font-size:9px;
  line-height:1.8;
  max-width:400px;
  min-height:100px;
}

.confetti{
  position:absolute;
  font-size:16px;
  animation:fall 3s linear forwards;
}
@keyframes fall{
  from{transform:translateY(-20px)}
  to{transform:translateY(700px)}
}

.blur{
  filter:blur(4px);
  transform:scale(.98);
}
</style>
</head>

<body>

<div class="window" id="window">
<div class="titlebar">DIGITAL VALENTINE EXPERIENCE üíò</div>
<div class="content">

<div id="menu">
  <p>VALENTINE SYSTEM READY...</p>
  <div class="btn" onclick="startGame()">ENTER HER WORLD üíô</div>
</div>

<div id="game" class="hidden">
  <div>TIME: <span id="time">180</span>s</div>
  <div>SCORE: <span id="score">0</span></div>
  <div class="gameArea" id="gameArea"></div>
</div>

</div>

<!-- FINALE OVERLAY -->
<div class="overlay" id="overlay">
  <h1>üíò HAPPY VALENTINE üíò</h1>
  <div class="typewriter" id="finalText"></div>
  <div class="btn" onclick="restart()">BACK TO MENU</div>
</div>

</div>

<script>
let time=180;
let score=0;
let timerInterval;
let spawnInterval;

function startGame(){
  document.getElementById("menu").classList.add("hidden");
  document.getElementById("game").classList.remove("hidden");
  resetGame();
  timerInterval=setInterval(updateTimer,1000);
  spawnInterval=setInterval(spawnHeart,700);
}

function resetGame(){
  time=180;
  score=0;
  updateUI();
  document.getElementById("gameArea").innerHTML="";
}

function updateUI(){
  document.getElementById("time").innerText=time;
  document.getElementById("score").innerText=score;
}

function updateTimer(){
  time--;
  updateUI();
  if(time<=0){
    endGame();
  }
}

function spawnHeart(){
  const heart=document.createElement("div");
  heart.className="heart";
  heart.innerText="üíô";
  heart.style.left=Math.random()*460+"px";
  heart.style.top=Math.random()*350+"px";
  heart.onclick=function(){
    score++;
    updateUI();
    heart.remove();
  };
  document.getElementById("gameArea").appendChild(heart);
  setTimeout(()=>heart.remove(),4000);
}

function endGame(){
  clearInterval(timerInterval);
  clearInterval(spawnInterval);
  document.getElementById("window").classList.add("blur");
  showOverlay();
}

function showOverlay(){
  const overlay=document.getElementById("overlay");
  overlay.classList.add("show");
  typeWriterEffect(
`Tiga menit mungkin terasa singkat.

Tapi setiap detik yang aku habiskan
memikirkan kamu
rasanya jauh lebih lama dan hangat.

Skor kamu: ${score}

Dan dari semua pilihan di dunia ini,
aku tetap pilih kamu. üíôüçì`
  );
  confetti();
}

function typeWriterEffect(text){
  const element=document.getElementById("finalText");
  element.innerHTML="";
  let i=0;
  const speed=40;
  function typing(){
    if(i<text.length){
      element.innerHTML+=text.charAt(i);
      i++;
      setTimeout(typing,speed);
    }
  }
  typing();
}

function confetti(){
  for(let i=0;i<50;i++){
    const c=document.createElement("div");
    c.className="confetti";
    c.innerText="üíñ";
    c.style.left=Math.random()*520+"px";
    document.getElementById("window").appendChild(c);
    setTimeout(()=>c.remove(),3000);
  }
}

function restart(){
  document.getElementById("overlay").classList.remove("show");
  document.getElementById("window").classList.remove("blur");
  document.getElementById("game").classList.add("hidden");
  document.getElementById("menu").classList.remove("hidden");
}
</script>

</body>
</html>
