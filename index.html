<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Blue Valentine Block Game</title>

<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box;margin:0;padding:0}

body{
  height:100vh;
  background:linear-gradient(135deg,#dbeafe,#fbcfe8);
  display:flex;
  justify-content:center;
  align-items:center;
  font-family:'Press Start 2P',cursive;
  overflow:hidden;
}

.window{
  width:560px;
  height:680px;
  background:white;
  border:4px solid #1e3a8a;
  box-shadow:10px 10px 0 #1e3a8a;
  position:relative;
  overflow:hidden;
}

.titlebar{
  background:#1e3a8a;
  color:white;
  padding:12px;
  font-size:10px;
  text-align:center;
}

.content{
  padding:20px;
  text-align:center;
  font-size:9px;
  color:#1e3a8a;
  height:calc(100% - 40px);
  position:relative;
}

.btn{
  padding:12px;
  border:3px solid #1e3a8a;
  background:#93c5fd;
  margin:10px;
  cursor:pointer;
  display:inline-block;
  transition:.2s;
}
.btn:hover{
  background:#60a5fa;
  transform:scale(1.05);
}

.hidden{display:none}

.grid{
  margin-top:20px;
  display:grid;
  grid-template-columns:repeat(5,1fr);
  gap:6px;
}

.cell{
  width:90px;
  height:90px;
  background:#e0f2fe;
  border:3px solid #1e3a8a;
  display:flex;
  justify-content:center;
  align-items:center;
  cursor:pointer;
  transition:.15s;
}

.cell.active{
  background:#60a5fa;
  transform:scale(1.05);
}

.scoreBox{
  margin-top:15px;
}

.message{
  margin-top:15px;
  min-height:70px;
  line-height:1.6;
}

.overlay{
  position:absolute;
  inset:0;
  background:linear-gradient(180deg,#1e3a8a,#9333ea);
  color:white;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  padding:30px;
  text-align:center;
  opacity:0;
  pointer-events:none;
  transition:.8s;
}

.overlay.show{
  opacity:1;
  pointer-events:auto;
}

.overlay h1{
  font-size:14px;
  margin-bottom:20px;
}

.typewriter{
  font-size:9px;
  line-height:1.8;
  max-width:420px;
  min-height:100px;
}
</style>
</head>

<body>

<div class="window">
<div class="titlebar">BLUE VALENTINE BLOCK ğŸ’™</div>
<div class="content">

<!-- MENU -->
<div id="menu">
  <p>CHOOSE YOUR MODE</p>
  <div class="btn" onclick="startGame()">ENTER HER WORLD ğŸ’™</div>
  <div class="btn" onclick="showReality()">STAY IN REALITY</div>
</div>

<!-- REALITY -->
<div id="reality" class="hidden">
  <p>âš  REALITY MODE</p><br>
  Tidak ada block. Tidak ada warna biru.<br><br>
  Tapi tetap saja...<br>
  kamu kepikiran dia ğŸ’™<br><br>
  <div class="btn" onclick="goMenu()">BACK</div>
</div>

<!-- GAME -->
<div id="game" class="hidden">
  <div class="scoreBox">SCORE: <span id="score">0</span> / 180</div>
  <div class="grid" id="grid"></div>
  <div class="message" id="message">
    Raih 180 poin untuk membuka pesan spesial ğŸ’˜
  </div>
</div>

</div>

<!-- FINALE -->
<div class="overlay" id="overlay">
  <h1>ğŸ’˜ HAPPY VALENTINE ğŸ’˜</h1>
  <div class="typewriter" id="finalText"></div>
  <div class="btn" onclick="restart()">BACK TO MENU</div>
</div>

</div>

<script>
let score=0;
let activeIndex=null;

const milestoneMessages={
30:"30 poin... kamu mulai masuk ke dunianya ğŸ’™",
60:"60 poin... rasanya makin nyaman ya?",
90:"90 poin... hampir setengah perjalanan hati.",
120:"120 poin... kamu nggak mau berhenti ya?",
150:"150 poin... deg-degan sedikit.",
180:"180 poin... kamu berhasil ğŸ’˜"
};

function createGrid(){
  const grid=document.getElementById("grid");
  grid.innerHTML="";
  for(let i=0;i<25;i++){
    const cell=document.createElement("div");
    cell.className="cell";
    cell.onclick=()=>clickCell(i);
    grid.appendChild(cell);
  }
}

function activateRandom(){
  const cells=document.querySelectorAll(".cell");
  cells.forEach(c=>c.classList.remove("active"));
  activeIndex=Math.floor(Math.random()*cells.length);
  cells[activeIndex].classList.add("active");
}

function clickCell(index){
  if(index===activeIndex){
    score+=10;
    document.getElementById("score").innerText=score;
    checkMilestone();
    activateRandom();
    if(score>=180){
      endGame();
    }
  }
}

function checkMilestone(){
  if(milestoneMessages[score]){
    document.getElementById("message").innerText=milestoneMessages[score];
  }
}

function startGame(){
  score=0;
  document.getElementById("score").innerText=0;
  document.getElementById("menu").classList.add("hidden");
  document.getElementById("reality").classList.add("hidden");
  document.getElementById("game").classList.remove("hidden");
  document.getElementById("message").innerText="Raih 180 poin untuk membuka pesan spesial ğŸ’˜";
  createGrid();
  activateRandom();
}

function showReality(){
  document.getElementById("menu").classList.add("hidden");
  document.getElementById("reality").classList.remove("hidden");
}

function goMenu(){
  document.getElementById("reality").classList.add("hidden");
  document.getElementById("menu").classList.remove("hidden");
}

function endGame(){
  document.getElementById("overlay").classList.add("show");
  typeWriter(
`180 poin tercapai.

Setiap klik tadi
kayak setiap detik aku
yang selalu milih kamu.

Kamu itu biru yang paling tenang,
dan stroberi yang paling manis.

Happy Valentine ğŸ’™ğŸ“`
  );
}

function typeWriter(text){
  const el=document.getElementById("finalText");
  el.innerHTML="";
  let i=0;
  function typing(){
    if(i<text.length){
      el.innerHTML+=text.charAt(i);
      i++;
      setTimeout(typing,35);
    }
  }
  typing();
}

function restart(){
  document.getElementById("overlay").classList.remove("show");
  document.getElementById("game").classList.add("hidden");
  document.getElementById("menu").classList.remove("hidden");
}
</script>

</body>
</html>
