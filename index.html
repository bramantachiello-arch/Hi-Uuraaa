<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Valentine Pixel Quest</title>

<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Press Start 2P',cursive}

body{
height:100vh;
overflow:hidden;
background:linear-gradient(-45deg,#bde0fe,#ffc8dd,#a2d2ff,#ffafcc);
background-size:400% 400%;
animation:bgMove 15s ease infinite;
display:flex;
justify-content:center;
align-items:center;
color:white;
}

@keyframes bgMove{
0%{background-position:0% 50%}
50%{background-position:100% 50%}
100%{background-position:0% 50%}
}

.screen{
position:absolute;
opacity:0;
pointer-events:none;
transform:scale(.9);
transition:all .5s ease;
text-align:center;
}

.screen.active{
opacity:1;
pointer-events:auto;
transform:scale(1);
}

.box{
background:rgba(0,0,0,.5);
padding:40px;
border-radius:20px;
width:420px;
box-shadow:0 0 25px rgba(255,255,255,.3);
}

h1{
font-size:16px;
margin-bottom:25px;
}

p{
font-size:10px;
line-height:1.6;
margin-bottom:20px;
}

.btn{
margin:10px;
padding:12px 18px;
border:none;
background:#ff8fab;
color:white;
cursor:pointer;
border-radius:12px;
font-size:10px;
transition:.3s;
}

.btn:hover{
background:#ff5d8f;
transform:scale(1.05);
}

#gameBoard{
display:grid;
grid-template-columns:repeat(8,40px);
gap:6px;
margin-top:20px;
}

.block{
width:40px;
height:40px;
border-radius:8px;
cursor:pointer;
transition:.2s;
}

.block:hover{
transform:scale(1.1);
}

.score{
position:absolute;
top:20px;
left:20px;
font-size:12px;
}

.instruction{
position:absolute;
top:50px;
left:20px;
font-size:8px;
width:220px;
line-height:1.4;
}

.notification{
position:fixed;
top:20px;
right:20px;
background:white;
color:black;
padding:15px;
border-radius:15px;
width:260px;
transform:translateX(300px);
opacity:0;
transition:.5s;
font-size:10px;
line-height:1.4;
}

.notification.show{
transform:translateX(0);
opacity:1;
}
</style>
</head>

<body>

<!-- MAIN MENU -->
<div id="menu" class="screen active">
<div class="box">
<h1>VALENTINE PIXEL QUEST</h1>
<button class="btn" onclick="enterGame()">ENTER HER WORLD</button>
<button class="btn" onclick="enterStay()">STAY IN REALITY</button>
</div>
</div>

<!-- GAME -->
<div id="game" class="screen">

  <div class="game-wrapper">

    <!-- SCORE PANEL -->
    <div class="score-panel">
      <h2>SCORE BOARD</h2>
      <div class="score-value">
        <span id="score">0</span> / 180
      </div>
    </div>

    <!-- GAME AREA -->
    <div class="game-area">
      <div id="gameBoard"></div>
    </div>

  </div>

  <!-- INSTRUCTION OVERLAY -->
  <div id="instructionOverlay" class="overlay active">
    <div class="overlay-box">
      <h2>CARA BERMAIN</h2>
      <p>
        Klik block berwarna merah hingga pink<br>
        untuk mengubahnya menjadi biru.<br><br>
        Setiap block yang berhasil diubah<br>
        bernilai 10 poin.<br><br>
        Capai 180 poin untuk membuka<br>
        pesan spesial Valentine ‚ù§Ô∏è
      </p>
      <button class="btn" onclick="startGame()">PLAY</button>
    </div>
  </div>

</div>
<!-- STAY SCREEN -->
<div id="stay" class="screen">
<div class="box">
<h1>STAY IN REALITY</h1>
<p>
Reality terasa biasa saja.<br>
Tidak ada warna merah muda.<br>
Tidak ada kejutan kecil.<br><br>
Apakah kamu yakin ingin tetap di sini?
</p>
<button class="btn" onclick="backToMenu()">BACK TO MENU</button>
</div>
</div>

<!-- ENDING -->
<div id="ending" class="screen">
<div class="box">
<h1>HAPPY VALENTINE ‚ù§Ô∏è</h1>
<p>
180 poin tercapai.<br><br>
Terima kasih sudah menjadi<br>
warna terindah dalam hidupku.
</p>
<button class="btn" onclick="backToMenu()">BACK TO MENU</button>
</div>
</div>

<div id="notif" class="notification"></div>

<script>
let score=0;

function switchScreen(from,to){
document.getElementById(from).classList.remove("active");
setTimeout(()=>{
document.getElementById(to).classList.add("active");
},300);
}

function backToMenu(){
score=0;
document.getElementById("score").innerText=0;
switchScreen("game","menu");
switchScreen("stay","menu");
switchScreen("ending","menu");
}

function enterGame(){
switchScreen("menu","game");
generateBoard();
}

function enterStay(){
switchScreen("menu","stay");
}

function generateBoard(){
let board=document.getElementById("gameBoard");
board.innerHTML="";
for(let i=0;i<64;i++){
let block=document.createElement("div");
block.className="block";
let color=randomColor();
block.style.background=color;
block.dataset.color=color;
block.onclick=()=>clickBlock(block);
board.appendChild(block);
}
}

function randomColor(){
const colors=["#ff8fab","#ffc8dd","#ff5d8f","#a2d2ff"];
return colors[Math.floor(Math.random()*colors.length)];
}

function clickBlock(block){
let current=block.style.backgroundColor;

if(current.includes("255") || block.dataset.color!="#a2d2ff"){
block.style.background="#a2d2ff";
block.dataset.color="#a2d2ff";
score+=10;
document.getElementById("score").innerText=score;
checkMilestone();
}

if(score>=180){
setTimeout(()=>{
switchScreen("game","ending");
},600);
}
}

function checkMilestone(){
let text="";
if(score===50){
text="Kamu selalu bikin hariku lebih cerah üíñ";
}
if(score===100){
text="Setengah perjalanan‚Ä¶ seperti kamu melengkapi aku üå∏";
}
if(score===150){
text="Hampir sampai‚Ä¶ hatiku ikut deg-deg-an üíï";
}
if(text!==""){
showNotif(text);
}
}

function showNotif(text){
let n=document.getElementById("notif");
n.innerHTML=text;
n.classList.add("show");
setTimeout(()=>n.classList.remove("show"),3500);
}
</script>

</body>
</html>
